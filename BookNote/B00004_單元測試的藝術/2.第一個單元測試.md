## 單元測試框架

### 單元測試框架提供了什麼？

受限的測試：
- 非結構化
  - 每當測試一個新功能就要重寫代碼
- 不可重複
- 不能覆蓋代碼所有重要部分
  - 所有包含邏輯的部份

使用單元測試框架並不能確保你編寫的代碼
- 可讀
- 可維護
- 可靠

### 編寫單元測試
單元測試通常包含三個主要行為：
- 準備物件：創建對象,進行必要設置
- 操作物件
- 斷言：確認事情符合預期

### 測試代碼格式
測試名可以很長

程式部分要區分
- 準備
- 操作
- 斷言

測試代碼要注重可讀性

嘗試減少重複測試代碼

### 使用參數重構測試
假設在某個函數添加參數後,要修復很多測試
就會增加維護測試的成本
這時候可以重構測試

parameterization 可以適度簡化代碼

但也不要過度極簡
適當冗余可以讓代碼更易讀

### setup/teardown
進行單測,很重要一點是保證之前測試遺留的數據和實例得到銷毀
新測試狀態是干淨的
如果有遺留的狀態,可能會導致測試失敗

setup/teardown 可以避免這種情況
But 也要注意
setup/teardown 會增加測試的時間
也會降低代碼的可讀性
-> 因為人們要同時看兩處代碼(setup 和 test)

可以把 setup/teardown 想像成測試類的構造函數和析構函數
每個測試類都只能有一個構造函數和析構函數

並不建議使用 setup
因為隨著代碼增加 setup 會變得難以閱讀

單測基本上不會用到 teardown 或是 test fixture
如果用到了,你很有可能是用到了數據庫,編寫的是集成測試

只有一種情況單測會用到 teardown
-> 需要再單測
再測試間重置,一個靜態變量,或是單例模式

### 檢驗預期的異常

### 忽略測試



###



## 測試系統狀態的改變而非返回值
返回值進行測試
->系統狀態改變

## 小技巧
多使用工廠方法,可以減少重複代碼
並且讓創建物件變得更可讀



## 延伸閱讀

